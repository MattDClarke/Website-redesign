const body=document.querySelector("body"),mainContent=document.querySelector(".main-content"),mainCover=document.querySelector(".main-cover"),burger=document.querySelector(".burger"),navUl=document.querySelector("#navUl"),navUlListAnchors=navUl.querySelectorAll("li a"),searchInput=document.querySelector("#searchInput"),searchIcon=document.querySelector("#search-btn"),closeBtnSearch=document.querySelector("#search-close");function debounce(func,wait=20,immediate=!0){let timeout;return function(){const context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&func.apply(context,args)}}function searchFilter(){const filter=searchInput.value.toUpperCase(),ul=document.querySelector("#searchUL"),li=ul.getElementsByTagName("li");if(""===searchInput.value)ul.style.display="none";else{ul.style.display="block";for(let i=0;i<li.length;i+=1){const a=li[i].getElementsByTagName("a")[0],txtValue=a.innerText;txtValue.toUpperCase().indexOf(filter)>-1?li[i].style.display="block":li[i].style.display="none"}}}const navSlide=()=>{burger.addEventListener("click",()=>{closeBtnSearch.style.display="none",searchIcon.style.display="block",searchInput.style.height="0",searchInput.value="",searchFilter(),navUl.classList.toggle("nav-active"),navUl.classList.contains("nav-active")?(navUl.style.animation="navSwipeOpen 0.5s ease-in",navUlListAnchors.forEach(li=>{li.setAttribute("tabindex",0)})):(navUl.style.animation="navSwipeClose 0.5s ease-in",navUlListAnchors.forEach(li=>{li.setAttribute("tabindex",-1)})),burger.classList.toggle("close"),mainContent.classList.toggle("background-fade"),mainCover.classList.toggle("main-cover-opened"),body.classList.toggle("remove-scroll")})};function removeBlurAndClose(){window.innerWidth>1e3&&(navUl.classList.remove("nav-active"),mainContent.classList.remove("background-fade"),mainCover.classList.remove("main-cover-opened"),body.classList.remove("remove-scroll"),burger.classList.remove("close"),navUl.style.animation="navSwipeClose 0.5s ease-in",navUlListAnchors.forEach(li=>{li.setAttribute("tabindex",-1)}))}function exitNav(){window.innerWidth<=1e3&&!0===navUl.classList.contains("nav-active")&&(navUl.classList.remove("nav-active"),mainContent.classList.remove("background-fade"),mainCover.classList.remove("main-cover-opened"),body.classList.remove("remove-scroll"),burger.classList.remove("close"),navUl.style.animation="navSwipeClose 0.5s ease-in")}function listTabIndexChange(){window.innerWidth>1e3?navUlListAnchors.forEach(li=>{li.setAttribute("tabindex",0)}):navUlListAnchors.forEach(li=>{li.setAttribute("tabindex",-1)})}navSlide();const resizeHandler=function(){removeBlurAndClose(),listTabIndexChange()};mainCover.addEventListener("click",exitNav),window.addEventListener("resize",debounce(resizeHandler,50)),window.onload=listTabIndexChange;let count=0;const messageEnglish="Search for a species",messageChinese="尋找一個物種",speed=100;let message;function typeWriter(){if(message=searchIcon.classList.contains("search-btn-zh")?"尋找一個物種":messageEnglish,count<message.length){const msg=searchInput.getAttribute("placeholder")+message.charAt(count);searchInput.setAttribute("placeholder",msg),count+=1,setTimeout(typeWriter,100)}}searchIcon.addEventListener("click",()=>{searchIcon.style.display="none",closeBtnSearch.style.display="block",searchInput.style.height="40px",searchInput.style.cursor="text",searchInput.setAttribute("tabindex",0),searchInput.focus(),typeWriter()}),closeBtnSearch.addEventListener("click",()=>{closeBtnSearch.style.display="none",searchInput.setAttribute("tabindex",-1),searchIcon.style.display="block",searchInput.style.height="0",searchInput.value="",searchFilter()}),document.querySelector("#searchInput").addEventListener("keyup",searchFilter);const footerImg=document.querySelector(".footer-img-container"),observer=new IntersectionObserver(entries=>{entries[0].intersectionRatio>0?entries[0].target.style.animation="slideIn 2s forwards ease":entries[0].target.style.animation="none"});observer.observe(footerImg);